<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Chatbot</title>
    <!-- âœ… Bootstrap CDN -->
    <!--   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.7/dist/litera/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

</head>
<body class="bg-dark-subtle">

<div class="container py-5">
    <h1 class="mb-4 text-center">ðŸ¤– Chat with Your PDF</h1>

    <!-- PDF Upload Form -->
    <form method="POST" enctype="multipart/form-data" class="mb-4">
        <div class="mb-3">
            <label for="pdf" class="form-label">Upload a PDF</label>
            <input class="form-control" type="file" id="pdf" name="pdf" accept=".pdf"> <!-- class is for boostrap style,  type allows the user to upload from device, id is for labels, name is used to traceback in the main, accept is to accept pdf  -->
        </div>
        <button type="submit" class="btn btn-primary"> <i class = "bi bi-file-earmark-arrow-up"></i> Upload PDF</button>
        {% if upload_success %}
        <div class="alert alert-success d-flex align-items-center mt-3" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            PDF uploaded successfully!
        </div>
{% endif %}
    </form>

    <!-- Question Form -->
    <form method="POST">
        <div class="mb-3">
            <label for="question" class="form-label">Ask a question</label>
            <input class="form-control" type="text" id="question" name="question" placeholder="e.g. Summarize the playoffs" required>
        </div>
        <button type="submit" class="btn btn-primary">Ask</button>
    </form>

    <!-- Response Output -->
    {% if answer %}
    <div class="alert alert-info mt-4">
        <strong>Answer:</strong> {{ answer }}
    </div>
    {% endif %}

    {% if history %}
    <div class="mt-5">
        <h4 class="mb-4">Chat History:</h4>

    <!-- Loop through each question-answer pair -->
    {% for q, a in history %}
        <div class="mb-3">

        <!-- User's question bubble -->
        <div class="d-flex justify-content-start">
            <div class="p-3 bg-primary text-white rounded shadow-sm mb-2" style="max-width: 75%;">
                 {{ q }}
            </div>
        </div>

        <!-- Bot's answer bubble -->
        <div class="d-flex justify-content-end">
            <div class="p-3 bg-light border rounded shadow-sm mb-2" style="max-width: 75%;">
                 {{ a }}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
</div>

<!-- Bootstrap JS (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
